package com.example.demo.service;

import java.math.BigDecimal;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Service;

import com.example.demo.repository.AdminDashboardRepository;

@Service
public class AdminDashboardService {
	private final AdminDashboardRepository repo;

	  public AdminDashboardService(AdminDashboardRepository repo) {
	    this.repo = repo;
	  }

	  public Map<String, Object> getDashboard() {
	    long users = repo.countUsers();
	    long activeProducts = repo.countActiveProducts();
	    long orders = repo.countOrders();
	    long ordersToday = repo.countOrdersToday();
	    BigDecimal revenue = repo.sumRevenueCompleted();

	    List<Map<String, Object>> ordersByStatus = repo.countOrdersByStatus();
	    List<Map<String, Object>> revenue7Days = repo.revenueLast7Days();

	    Map<String, Object> resp = new HashMap<>();
	    resp.put("users", users);
	    resp.put("activeProducts", activeProducts);
	    resp.put("orders", orders);
	    resp.put("ordersToday", ordersToday);
	    resp.put("revenue", revenue);
	    resp.put("ordersByStatus", ordersByStatus);
	    resp.put("revenueLast7Days", revenue7Days);
	    return resp;
	  }

}
